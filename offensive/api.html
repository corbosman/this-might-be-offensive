<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8 "/> 
	<title>TMBO API Specification</title>
</head>
<body>

<h2>TMBO API Specification</h2>
<p>This document describes functions, their arguments, return values, error codes, and other information used to interact with the TMBO server at thismight.be.</p>

<hr/>
<a name="Authentication">
<h3>Authentication</h3>
<p>There are three methods of authentication:</p>

<ul>
	<li>Tokens - A token generated by the <a href="#login">login method</a> can be used as an argument to any call except <a href="#logout">logout</a>. This is the preferred method of authentication.</li>
	<li>Session cookie - A client that supports cookies may log in with the <a href="#login">login method</a>, which will attempt to set a session cookie for short-term authentication if a token is not requested.</li>
	<li>Basic access authentication - The username and password is provided for every call using <a href="http://en.wikipedia.org/wiki/Basic_access_authentication">HTTP basic access authentication</a>.</li>
<!--	<li>rememberme cookie - Setting the rememeberme option to the <a href="#login">login method</a> will cause it to set a rememberme cookie that can be used for long-term authentication.</li> -->
</ul>


<hr/>
<h3>Parameter Types</h3>
<p>The API supports 5 distinct data types for parameters, as described below.</p>

<ul>
	<li><em>string</em> - UTF-8 string.</li>
	<li><em>integer</em> - Whole number.</li>
	<li><em>date</em> - Any format parseable by <a href="http://php.net/strtotime">strtotime</a> is appropriate. The server time zone is America/Los_Angeles.</li>
	<li><em>limit</em> - Format: "%d,%d" or "%d". Syntax is the same as <a href="http://dev.mysql.com/doc/refman/5.0/en/select.html">LIMIT in SQL</a>. Default and largest accepted set size is 200.</li>
	<li><em>float</em> - Double precision floating point number.</li>
</ul>


<hr/>
<h3>Return Types</h3>
<p>The API supports 4 formats, which are determined by the server by the filetype extension of the request.</p>

<ul>
	<li><em>json</em> - A <a href="http://json.org/">JSON</a> structure, especially suitable for use by Javascript clients.</li>
	<li><em>plist</em> - An XML-formatted <a href="http://en.wikipedia.org/wiki/Property_list">Property List</a> structure, especially suitable for use by Cocoa clients.</li>
	<li><em>php</em> - A <a href="http://us3.php.net/serialize">serialized</a> PHP structure, especially suitable for use by PHP clients.</li>
	<li><em>xml</em> - A basic XML-formatted structure, suitable for use by no one.</li>
</ul>

<hr/>
<h3>Status Codes</h3>
<p>The following error codes are used by the site as return values:</p>
<ul>
	<li><b>200</b> <em>OK</em> - Call completed as dialled.</li>
	<li><b>304</b> <em>Not Modified</em> - If a Conditional GET is used, this indicates that there are no changes to report.</li>
	<li><b>400</b> <em>Bad Request</em> - The call is erroneous. The body will contain debugging information.</li>
	<li><b>401</b> <em>Unauthorized</em> - Login failure. Either your credentials weren't valid, or you did not provide any.</li>
	<li><b>403</b> <em>Forbidden</em> - This content is not available to you.</li>
	<li><b>404</b> <em>Not Found</em> - The function being requested does not exist.</li>
	<li><b>500</b> <em>Internal Server Error</em> - kaboom. Please report if reproducible.</li>
	<li><b>502</b> <em>Bad Gateway</em> - TMBO is down for maintenance. Please wait a few minutes and try your call again.</li>
	<li><b>503</b> <em>Service Unavailable</em> - Refusal. You have attempted to log in too many times in a rolling 30 minute period and you are blocked from any more attempts. Wait and try again later.</li>
</ul>

<hr/>
<h3>Don't be Retarded</h3>
<p>Like the RSS feeds, requests are limited to a maximum of 200 returned elements.  If you want to download the entire history of the world since the dawn of time for your research project, that's fine but please sleep between requests.</p>

<p>This API does not support the load of TMBO on its own, so you may find some queries are inefficient and take a while to complete.  If you notice calls taking more than two seconds, please <a href="#Errata">send an email or open a ticket</a> with the method/arguments you're requesting, and try to reduce your usage until the problem is addressed.</p>

<hr/>
<h3>More</h3>
<p>The user-agent of the client is used to identify the client.<br />
If you are developing an application, please <a href="#Errata">send an email or open a ticket</a> with your application name and a sample user agent.</p>

<hr/>
<h3>Examples</h3>
<p>Here are some useful examples:</p>
<ul>
	<li>Get a front page of data: <code>https://thismight.be/offensive/api.php/getuploads.plist?type=image&amp;limit=100&amp;token=yourtoken</code></li>
	<li>Get the hall of fame: <code>https://thismight.be/offensive/api.php/getuploads.plist?type=image&amp;limit=100&amp;sort=votes_desc&amp;token=yourtoken</code></li>
</ul>

<p>More examples for each method can be found with its documentation.</p>

<hr/>
<h2>Function Definitions</h2>

<p>To jump to a function, click its link below:</p>
<ul>
	<li><a href="#getuploads">getuploads</a></li>
	<li><a href="#getupload">getupload</a></li>
	<li><a href="#getyearbook">getyearbook</a></li>
	<li><a href="#getuser">getuser</a></li>
	<li><a href="#getposse">getposse</a></li>
	<li><a href="#login">login</a></li>
	<li><a href="#logout">logout</a></li>
	<li><a href="#getcomments">getcomments</a></li>
	<li><a href="#postcomment">postcomment</a></li>
	<li><a href="#searchuser">searchuser</a></li>
	<li><a href="#searchuploads">searchuploads</a></li>
	<li><a href="#getlocation">getlocation</a></li>
	<li><a href="#setlocation">setlocation</a></li>
	<li><a href="#get_preference">get_preference</a></li>
	<li><a href="#set_preference">set_preference</a></li>
	<li><a href="#unreadcomments">unreadcomments</a></li>
	<li><a href="#subscribe">subscribe</a></li>
	<li><a href="#resetsubscription">resetsubscription</a></li>
</ul>

<hr/>
<a name="getuploads">
<h3>getuploads</h3>
<p>Get one or more uploads' metadata, including (if possible) links to the uploaded files themselves, and their thumbnails.</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>type</b> (string) - optional.
							Can be any of {"image","topic","avatar","audio"}.
						Get uploads of this type.</li>
	    <li><b>userid</b> (integer) - optional.
						Get uploads posted by this user.</li>
	    <li><b>after</b> (date) - optional.
						Get uploads newer than this.</li>
	    <li><b>before</b> (date) - optional.
						Get uploads older than this.</li>
	    <li><b>max</b> (integer) - optional.
						Get uploads before this fileid, inclusive.</li>
	    <li><b>since</b> (integer) - optional.
						Get uploads since this fileid, inclusive.</li>
	    <li><b>sort</b> (string) - optional.
							Can be any of {"date_desc","date_asc","votes_asc","votes_desc","comments_asc","comments_desc","activity_asc","activity_desc"}.
						Default:"date_desc" Result sorting. Sort by vote does not consider [-].</li>
	    <li><b>limit</b> (limit) - optional.
						Default and maximum is 200.</li>
	    <li><b>nsfw</b> (integer) - optional.
							Can be any of {"0","1"}.
						Set to 0, suppresses posts that are not safe for work. Set to 1, only returns results that are not safe for work.</li>
	    <li><b>tmbo</b> (integer) - optional.
							Can be any of {"0","1"}.
						Set to 0, suppresses posts that might be offensive. Set to 1, only returns results that might be offensive.</li>
	</ul>


<h4>Returns:</h4>
<p>Array of Upload objects.</p>

<h4>Examples:</h4>
<p><code>getuploads.xxx?type=image&nsfw=0&sort=date_asc&limit=3,10</code>: 
			<a href="/offensive/docs/getuploads.json%3Ftype%3Dimage%26nsfw%3D0%26sort%3Ddate_asc%26limit%3D3%2C10">json</a>
			<a href="/offensive/docs/getuploads.plist%3Ftype%3Dimage%26nsfw%3D0%26sort%3Ddate_asc%26limit%3D3%2C10">plist</a>
			<a href="/offensive/docs/getuploads.php%3Ftype%3Dimage%26nsfw%3D0%26sort%3Ddate_asc%26limit%3D3%2C10">php</a>
			<a href="/offensive/docs/getuploads.xml%3Ftype%3Dimage%26nsfw%3D0%26sort%3Ddate_asc%26limit%3D3%2C10">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#getupload">getupload</a> - 
Get an upload's metadata, including (if possible) links to the uploaded files themselves, and their thumbnails.

Calling this function updates your pickuplink.
</p>
	
<hr/>
<a name="getupload">
<h3>getupload</h3>
<p>Get an upload's metadata, including (if possible) links to the uploaded files themselves, and their thumbnails.<br />
<br />
Calling this function updates your pickuplink.</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>fileid</b> (integer) - required.
						Get upload with this id.</li>
	</ul>


<h4>Returns:</h4>
<p>A singleton Upload object or an Error object if upload does not exist.</p>

<h4>Examples:</h4>
<p><code>getupload.xxx?fileid=2</code>: 
			<a href="/offensive/docs/getupload.json%3Ffileid%3D2">json</a>
			<a href="/offensive/docs/getupload.plist%3Ffileid%3D2">plist</a>
			<a href="/offensive/docs/getupload.php%3Ffileid%3D2">php</a>
			<a href="/offensive/docs/getupload.xml%3Ffileid%3D2">xml</a>
	</p>
<p><code>getupload.xxx?fileid=112</code>: 
			<a href="/offensive/docs/getupload.json%3Ffileid%3D112">json</a>
			<a href="/offensive/docs/getupload.plist%3Ffileid%3D112">plist</a>
			<a href="/offensive/docs/getupload.php%3Ffileid%3D112">php</a>
			<a href="/offensive/docs/getupload.xml%3Ffileid%3D112">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#getuploads">getuploads</a> - 
Get one or more uploads' metadata, including (if possible) links to the uploaded files themselves, and their thumbnails.</p>
	
<hr/>
<a name="getyearbook">
<h3>getyearbook</h3>
<p>Get upload metadata for one or more users' current avatars.<br />
<br />
To access non-current avatars, use getuploads(type=avatar).</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>userid</b> (integer) - optional.
						Get the current avatar for this user only.</li>
	    <li><b>limit</b> (limit) - optional.
						Default and maximum is 200.</li>
	    <li><b>sort</b> (string) - optional.
							Can be any of {"date_desc","date_asc","uname_asc","uname_desc"}.
						Default:"uname_desc" Sort by username or upload date.</li>
	</ul>


<h4>Returns:</h4>
<p>A singleton Upload object if userid is specified, an array of Upload objects otherwise. Returns false if the userid does not exist.</p>

<h4>Examples:</h4>
<p><code>getyearbook.xxx?userid=2054</code>: 
			<a href="/offensive/docs/getyearbook.json%3Fuserid%3D2054">json</a>
			<a href="/offensive/docs/getyearbook.plist%3Fuserid%3D2054">plist</a>
			<a href="/offensive/docs/getyearbook.php%3Fuserid%3D2054">php</a>
			<a href="/offensive/docs/getyearbook.xml%3Fuserid%3D2054">xml</a>
	</p>
<p><code>getyearbook.xxx?limit=2&sort=date_asc</code>: 
			<a href="/offensive/docs/getyearbook.json%3Flimit%3D2%26sort%3Ddate_asc">json</a>
			<a href="/offensive/docs/getyearbook.plist%3Flimit%3D2%26sort%3Ddate_asc">plist</a>
			<a href="/offensive/docs/getyearbook.php%3Flimit%3D2%26sort%3Ddate_asc">php</a>
			<a href="/offensive/docs/getyearbook.xml%3Flimit%3D2%26sort%3Ddate_asc">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#getuploads">getuploads</a> - 
Get one or more uploads' metadata, including (if possible) links to the uploaded files themselves, and their thumbnails.</p>
	
<hr/>
<a name="getuser">
<h3>getuser</h3>
<p>Get a user's metadata.</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>userid</b> (integer) - optional.
						Get metadata for this user. Defaults to the current user.</li>
	</ul>


<h4>Returns:</h4>
<p>If the userid exists, returns a user metadata object. Returns false if the userid does not exist.</p>

<h4>Examples:</h4>
<p><code>getuser.xxx?userid=151</code>: 
			<a href="/offensive/docs/getuser.json%3Fuserid%3D151">json</a>
			<a href="/offensive/docs/getuser.plist%3Fuserid%3D151">plist</a>
			<a href="/offensive/docs/getuser.php%3Fuserid%3D151">php</a>
			<a href="/offensive/docs/getuser.xml%3Fuserid%3D151">xml</a>
	</p>


<hr/>
<a name="getposse">
<h3>getposse</h3>
<p>Get a user's posse.</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>userid</b> (integer) - optional.
						Get metadata for this user. Defaults to the current user.</li>
	</ul>


<h4>Returns:</h4>
<p>If the userid exists, returns a possibly-empty array of user metadata objects. Returns false if userid does not exist.</p>

<h4>Examples:</h4>
<p><code>getposse.xxx?userid=2054</code>: 
			<a href="/offensive/docs/getposse.json%3Fuserid%3D2054">json</a>
			<a href="/offensive/docs/getposse.plist%3Fuserid%3D2054">plist</a>
			<a href="/offensive/docs/getposse.php%3Fuserid%3D2054">php</a>
			<a href="/offensive/docs/getposse.xml%3Fuserid%3D2054">xml</a>
	</p>
<p><code>getposse.xxx?userid=22</code>: 
			<a href="/offensive/docs/getposse.json%3Fuserid%3D22">json</a>
			<a href="/offensive/docs/getposse.plist%3Fuserid%3D22">plist</a>
			<a href="/offensive/docs/getposse.php%3Fuserid%3D22">php</a>
			<a href="/offensive/docs/getposse.xml%3Fuserid%3D22">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#getuser">getuser</a> - 
Get a user's metadata.
</p>
	
<hr/>
<a name="login">
<h3>login</h3>
<p>Establish a session for future requests and/or generate a token.<br />
<br />
The token is named after the user-agent of the requesting application and can be revoked by the user at any time in /offensive/?c=settings.</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>username</b> (string) - required.
						User's name.</li>
	    <li><b>password</b> (string) - required.
						User's password.</li>
	    <li><b>gettoken</b> (integer) - optional.
							Can be any of {"0","1"}.
						Do you want to generate a new token?</li>
	</ul>


<h4>Returns:</h4>
<p>a token object or the metadata for the current user.</p>

<h4>Examples:</h4>
<p><code>login.xxx?username=jonxp&password=tester</code>: 
			<a href="/offensive/docs/login.json%3Fusername%3Djonxp%26password%3Dtester">json</a>
			<a href="/offensive/docs/login.plist%3Fusername%3Djonxp%26password%3Dtester">plist</a>
			<a href="/offensive/docs/login.php%3Fusername%3Djonxp%26password%3Dtester">php</a>
			<a href="/offensive/docs/login.xml%3Fusername%3Djonxp%26password%3Dtester">xml</a>
	</p>
<p><code>login.xxx?username=ray&password=tester&gettoken=1</code>: 
			<a href="/offensive/docs/login.json%3Fusername%3Dray%26password%3Dtester%26gettoken%3D1">json</a>
			<a href="/offensive/docs/login.plist%3Fusername%3Dray%26password%3Dtester%26gettoken%3D1">plist</a>
			<a href="/offensive/docs/login.php%3Fusername%3Dray%26password%3Dtester%26gettoken%3D1">php</a>
			<a href="/offensive/docs/login.xml%3Fusername%3Dray%26password%3Dtester%26gettoken%3D1">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#getuser">getuser</a> - 
Get a user's metadata.
</p>
			<p><a href="#logout">logout</a> - 
Destroys the current session and invalidates the rememberme cookie.

Unnecessary if you are only using a token to authenticate, which doesn't create a login session.
</p>
	
<hr/>
<a name="logout">
<h3>logout</h3>
<p>Destroys the current session and invalidates the rememberme cookie.<br />
<br />
Unnecessary if you are only using a token to authenticate, which doesn't create a login session.</p>

<p>This method takes no arguments.</p>

<h4>Returns:</h4>
<p>true</p>

<h4>Examples:</h4>
<p><code>logout.xxx?</code>: 
			<a href="/offensive/docs/logout.json%3F">json</a>
			<a href="/offensive/docs/logout.plist%3F">plist</a>
			<a href="/offensive/docs/logout.php%3F">php</a>
			<a href="/offensive/docs/logout.xml%3F">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#login">login</a> - 
Establish a session for future requests and/or generate a token.

The token is named after the user-agent of the requesting application and can be revoked by the user at any time in /offensive/?c=settings.
</p>
	
<hr/>
<a name="getcomments">
<h3>getcomments</h3>
<p></p>

<h4>Arguments:</h4>
<ul>
	    <li><b>votefilter</b> (string) - optional.
						Can contain any of "+-xrc" in any order. Other characters are ignored. Applies the following filters:<br />
•&nbsp;<b>+</b> - vote is 'this is good'.<br />
•&nbsp;<b>-</b> - vote is 'this is bad'.<br />
•&nbsp;<b>x</b> - vote includes 'this might be offensive'.<br />
•&nbsp;<b>r</b> - vote includes 'this is a repost'.<br />
•&nbsp;<b>c</b> - comment is not empty.</li>
	    <li><b>userid</b> (integer) - optional.
						Get comments made by this user only.</li>
	    <li><b>after</b> (date) - optional.
						Get comments newer than this date.</li>
	    <li><b>before</b> (date) - optional.
						Get comments older than this date.</li>
	    <li><b>idmin</b> (integer) - optional.
						Get comments after this commentid, inclusive.</li>
	    <li><b>idmax</b> (integer) - optional.
						Get comments before this commentid, inclusive.</li>
	    <li><b>id</b> (integer) - optional.
						Get comment with this id.</li>
	    <li><b>threadmin</b> (integer) - optional.
						Get comments from threads after this one, inclusive.</li>
	    <li><b>threadmax</b> (integer) - optional.
						Get comments from threads before this one, inclusive.</li>
	    <li><b>thread</b> (integer) - optional.
						Get comments from this thread.</li>
	    <li><b>sort</b> (string) - optional.
							Can be any of {"date_desc","date_asc"}.
						Default:"date_desc" Sort by comment date.</li>
	    <li><b>limit</b> (limit) - optional.
						Default and maximum is 200.</li>
	</ul>


<h4>Returns:</h4>
<p>An array of comment objects.</p>

<h4>Examples:</h4>
<p><code>getcomments.xxx?thread=112</code>: 
			<a href="/offensive/docs/getcomments.json%3Fthread%3D112">json</a>
			<a href="/offensive/docs/getcomments.plist%3Fthread%3D112">plist</a>
			<a href="/offensive/docs/getcomments.php%3Fthread%3D112">php</a>
			<a href="/offensive/docs/getcomments.xml%3Fthread%3D112">xml</a>
	</p>


<hr/>
<a name="postcomment">
<h3>postcomment</h3>
<p>Post a comment to a thread.</p>

<p>All parameters to this function are processed via the POST method, to prevent malicious votes via link shorteners.</p>

<p>No examples yet pending doc system support for POST in examples. Sorry.</p>

<h4>Arguments:</h4>
<ul>
	 <li><b>fileid</b> (integer) - required.
						Post comment to this thread.
	 <li><b>comment</b> (string) optional.
						Comment text.
	 <li><b>vote</b> (string) optional. 
						Can be any of {"this is good", "this is bad", "novote"}
						Default:"novote" The intended vote.
	 <li><b>offensive</b> (integer) optional.
						Can be any of {1, 0}
						Default: 0 Vote [this might be offensive].
	 <li><b>repost</b> (integer) optional.
						Can be any of {1, 0}
						Default: 0 Vote [this is a repost].
	 <li><b>subscribe</b> (integer) optional.
						Can be any of {1, 0}
						Default: 1 if vote is "this is bad" or comment is not empty, 0 otherwise. Setting to 1 ensures thread subscription, setting to 0 does nothing (the default will override argument of 0).
	</ul>


<h4>Returns:</h4>
<p>Comment object or false if nothing was added to the database.</p>

<hr/>
<a name="searchuser">
<h3>searchuser</h3>
<p>Find a user by username.</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>q</b> (string) - required.
						Full or partial username.</li>
	    <li><b>limit</b> (limit) - optional.
						Default and maximum is 200.</li>
	</ul>


<h4>Returns:</h4>
<p>Array of User objects matching query string.</p>

<h4>Examples:</h4>
<p><code>searchuser.xxx?q=max&limit=3</code>: 
			<a href="/offensive/docs/searchuser.json%3Fq%3Dmax%26limit%3D3">json</a>
			<a href="/offensive/docs/searchuser.plist%3Fq%3Dmax%26limit%3D3">plist</a>
			<a href="/offensive/docs/searchuser.php%3Fq%3Dmax%26limit%3D3">php</a>
			<a href="/offensive/docs/searchuser.xml%3Fq%3Dmax%26limit%3D3">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#getuser">getuser</a> - 
Get a user's metadata.
</p>
	
<hr/>
<a name="searchuploads">
<h3>searchuploads</h3>
<p>Find an upload by filename.</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>q</b> (string) - true.
						Full or partial filename.</li>
	    <li><b>limit</b> (limit) - optional.
						Default and maximum is 200.</li>
	    <li><b>type</b> (string) - optional.
							Can be any of {"image","topic","avatar","audio"}.
						Find only uploads of this type.</li>
	</ul>


<h4>Returns:</h4>
<p>Array of Upload objects matching query string.</p>

<h4>Examples:</h4>
<p><code>searchuploads.xxx?q=weekend&limit=5</code>: 
			<a href="/offensive/docs/searchuploads.json%3Fq%3Dweekend%26limit%3D5">json</a>
			<a href="/offensive/docs/searchuploads.plist%3Fq%3Dweekend%26limit%3D5">plist</a>
			<a href="/offensive/docs/searchuploads.php%3Fq%3Dweekend%26limit%3D5">php</a>
			<a href="/offensive/docs/searchuploads.xml%3Fq%3Dweekend%26limit%3D5">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#login">login</a> - 
Establish a session for future requests and/or generate a token.

The token is named after the user-agent of the requesting application and can be revoked by the user at any time in /offensive/?c=settings.
</p>
	
<hr/>
<a name="getlocation">
<h3>getlocation</h3>
<p>Get the reported location of one or more maxxers.<br />
<br />
This data is user-reported, so it's likely that everyone is lying.<br />
<br />
The format of the data returned from this call is unstable and subject to change. Do not use this in a shipping application.</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>userid</b> (integer) - optional.
						Get the current location for this user only.</li>
	    <li><b>minlat</b> (float) - optional.
						Get locations with latitudes larger than this.</li>
	    <li><b>maxlat</b> (float) - optional.
						Get locations with longitudes larger than this.</li>
	    <li><b>minlong</b> (float) - optional.
						Get locations with longitudes larger than this.</li>
	    <li><b>limit</b> (limit) - optional.
						Default and maximum is 200.</li>
	</ul>


<h4>Returns:</h4>
<p>An array of location data from the database matching the parameters.</p>

<h4>Examples:</h4>
<p><code>getlocation.xxx?limit=5</code>: 
			<a href="/offensive/docs/getlocation.json%3Flimit%3D5">json</a>
			<a href="/offensive/docs/getlocation.plist%3Flimit%3D5">plist</a>
			<a href="/offensive/docs/getlocation.php%3Flimit%3D5">php</a>
			<a href="/offensive/docs/getlocation.xml%3Flimit%3D5">xml</a>
	</p>
<p><code>getlocation.xxx?userid=2054</code>: 
			<a href="/offensive/docs/getlocation.json%3Fuserid%3D2054">json</a>
			<a href="/offensive/docs/getlocation.plist%3Fuserid%3D2054">plist</a>
			<a href="/offensive/docs/getlocation.php%3Fuserid%3D2054">php</a>
			<a href="/offensive/docs/getlocation.xml%3Fuserid%3D2054">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#setlocation">setlocation</a> - 

Set a user's location
</p>
	
<hr/>
<a name="setlocation">
<h3>setlocation</h3>
<p>Set a user's location</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>lat</b> (float) - required.
						User's latitude in degrees.</li>
	    <li><b>long</b> (float) - required.
						User's longitude in degrees.</li>
	</ul>


<h4>Returns:</h4>
<p>true</p>

<h4>Examples:</h4>
<p><code>setlocation.xxx?lat=50&long=50</code>: 
			<a href="/offensive/docs/setlocation.json%3Flat%3D50%26long%3D50">json</a>
			<a href="/offensive/docs/setlocation.plist%3Flat%3D50%26long%3D50">plist</a>
			<a href="/offensive/docs/setlocation.php%3Flat%3D50%26long%3D50">php</a>
			<a href="/offensive/docs/setlocation.xml%3Flat%3D50%26long%3D50">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#getlocation">getlocation</a> - 

Get the reported location of one or more maxxers.

This data is user-reported, so it's likely that everyone is lying.

The format of the data returned from this call is unstable and subject to change. Do not use this in a shipping application.
</p>
	
<hr/>
<a name="get_preference">
<h3>get_preference</h3>
<p>Retrieves the given user preference</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>key</b> (string) - The.
						preference to retrieve. It may be one of the following:<br />
•&nbsp;<b>hide_nsfw</b> - indicates the user wants to hide content that is not safe for work<br />
•&nbsp;<b>hide_tmbo</b> - indicates the user wants to hide content that might be offensive<br />
•&nbsp;<b>hide_bad</b> - indicates the user wants to hide content that has been deemed by others as "bad"<br />
•&nbsp;<b>sortorder_discussions</b> - sorting for discussions<br />
•&nbsp;<b>sortorder_yearbook</b> - sorting for yearbook<br />
•&nbsp;<b>index</b> - type of frontpage, "thumbs" or blank<br />
•&nbsp;<b>thumbnails_in_comments</b> - indicates if the user wants to view thumbnails in comments<br />
•&nbsp;<b>ipickup</b> - pickup id for images<br />
•&nbsp;<b>tpickup</b> - pickup id for topics (no web interface implemented)<br />
•&nbsp;<b>apickup</b> - pickup id for audio<br />
•&nbsp;<b>ypickup</b> - pickup id for yearbook (no web interface implemented)<br />
•&nbsp;<b>key_good</b> - key(s) for "vote good"<br />
•&nbsp;<b>key_bad</b> - key(s) for "vote bad"<br />
•&nbsp;<b>key_next</b> - key(s) for "go to the next post in the stream"<br />
•&nbsp;<b>key_prev</b> - key(s) for "go to the previous post in the stream"<br />
•&nbsp;<b>key_index</b> - key(s) for "go to the index"<br />
•&nbsp;<b>key_comments</b> - key(s) for "go to the comments for this upload"<br />
•&nbsp;<b>key_quick</b> - key(s) for "open the quick reply window"<br />
•&nbsp;<b>key_escape</b> - key(s) for "close modal dialogues"<br />
•&nbsp;<b>key_random</b> - key(s) for "random image jump"<br />
•&nbsp;<b>key_subscribe</b> - key(s) for "subscription toggle"</li>
	</ul>


<h4>Returns:</h4>
<p>The value of the preference (may be null)</p>

<h4>Examples:</h4>
<p><code>get_preference.xxx?key=ipickup</code>: 
			<a href="/offensive/docs/get_preference.json%3Fkey%3Dipickup">json</a>
			<a href="/offensive/docs/get_preference.plist%3Fkey%3Dipickup">plist</a>
			<a href="/offensive/docs/get_preference.php%3Fkey%3Dipickup">php</a>
			<a href="/offensive/docs/get_preference.xml%3Fkey%3Dipickup">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#set_preference">set_preference</a> - 

Set the given user preference
</p>
	
<hr/>
<a name="set_preference">
<h3>set_preference</h3>
<p>Set the given user preference</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>key</b> (string) - The.
						preference to set. It may be one of the following:<br />
•&nbsp;<b>hide_nsfw</b> - indicates the user wants to hide content that is not safe for work<br />
•&nbsp;<b>hide_tmbo</b> - indicates the user wants to hide content that might be offensive<br />
•&nbsp;<b>hide_bad</b> - indicates the user wants to hide content that has been deemed by others as "bad"<br />
•&nbsp;<b>sortorder_discussions</b> - sorting for discussions<br />
•&nbsp;<b>sortorder_yearbook</b> - sorting for yearbook<br />
•&nbsp;<b>index</b> - type of frontpage, "thumbs" or blank<br />
•&nbsp;<b>thumbnails_in_comments</b> - indicates if the user wants to view thumbnails in comments<br />
•&nbsp;<b>ipickup</b> - pickup id for images<br />
•&nbsp;<b>tpickup</b> - pickup id for topics (no web interface implemented)<br />
•&nbsp;<b>apickup</b> - pickup id for audio<br />
•&nbsp;<b>ypickup</b> - pickup id for yearbook (no web interface implemented)<br />
•&nbsp;<b>key_good</b> - key(s) for "vote good"<br />
•&nbsp;<b>key_bad</b> - key(s) for "vote bad"<br />
•&nbsp;<b>key_next</b> - key(s) for "go to the next post in the stream"<br />
•&nbsp;<b>key_prev</b> - key(s) for "go to the previous post in the stream"<br />
•&nbsp;<b>key_index</b> - key(s) for "go to the index"<br />
•&nbsp;<b>key_comments</b> - key(s) for "go to the comments for this upload"<br />
•&nbsp;<b>key_quick</b> - key(s) for "open the quick reply window"<br />
•&nbsp;<b>key_escape</b> - key(s) for "close modal dialogues"<br />
•&nbsp;<b>key_random</b> - key(s) for "random image jump"<br />
•&nbsp;<b>key_subscribe</b> - key(s) for "subscription toggle"</li>
	    <li><b>value</b> (string) - The.
						value to set. Leave blank to unset the preference.</li>
	</ul>


<h4>Returns:</h4>
<p>true</p>

<h4>Examples:</h4>
<p><code>set_preference.xxx?key=ipickup&value=12345</code>: 
			<a href="/offensive/docs/set_preference.json%3Fkey%3Dipickup%26value%3D12345">json</a>
			<a href="/offensive/docs/set_preference.plist%3Fkey%3Dipickup%26value%3D12345">plist</a>
			<a href="/offensive/docs/set_preference.php%3Fkey%3Dipickup%26value%3D12345">php</a>
			<a href="/offensive/docs/set_preference.xml%3Fkey%3Dipickup%26value%3D12345">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#get_preference">get_preference</a> - 

Retrieves the given user preference
</p>
	
<hr/>
<a name="unreadcomments">
<h3>unreadcomments</h3>
<p>Get a list of unchecked activity on subscribed threads.</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>sort</b> (string) - optional.
							Can be any of {"comment_desc","comment_asc","file_asc","file_desc"}.
						Default:"file_asc" Sort order of results.</li>
	    <li><b>limit</b> (limit) - optional.
						Default and maximum is 200.</li>
	</ul>


<h4>Returns:</h4>
<p>Array of Comment objects containing the oldest unread comment for each thread with unread comments.</p>

<h4>Examples:</h4>
<p><code>unreadcomments.xxx?limit=3&sort=file_asc</code>: 
			<a href="/offensive/docs/unreadcomments.json%3Flimit%3D3%26sort%3Dfile_asc">json</a>
			<a href="/offensive/docs/unreadcomments.plist%3Flimit%3D3%26sort%3Dfile_asc">plist</a>
			<a href="/offensive/docs/unreadcomments.php%3Flimit%3D3%26sort%3Dfile_asc">php</a>
			<a href="/offensive/docs/unreadcomments.xml%3Flimit%3D3%26sort%3Dfile_asc">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#getcomments">getcomments</a> - 

</p>
			<p><a href="#subscribe">subscribe</a> - 

(Un)Subscribe to new posts in a thread.
</p>
			<p><a href="#resetsubscription">resetsubscription</a> - 

Reset your subscription to a thread. New posts made to the thread after this call will cause the subscription to become active again.
</p>
	
<hr/>
<a name="subscribe">
<h3>subscribe</h3>
<p>(Un)Subscribe to new posts in a thread.</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>threadid</b> (integer) - required.
						Thread you're adding/removing from your subscriptions.</li>
	    <li><b>subscribe</b> (integer) - required.
							Can be any of {"1","0"}.
						0 -> unsubscribe, 1 -> subscribe.</li>
	</ul>


<h4>Returns:</h4>
<p>unsubscribe always returns true. subscribing returns false if thread does not exist.</p>

<h4>Examples:</h4>
<p><code>subscribe.xxx?threadid=211604&subscribe=1</code>: 
			<a href="/offensive/docs/subscribe.json%3Fthreadid%3D211604%26subscribe%3D1">json</a>
			<a href="/offensive/docs/subscribe.plist%3Fthreadid%3D211604%26subscribe%3D1">plist</a>
			<a href="/offensive/docs/subscribe.php%3Fthreadid%3D211604%26subscribe%3D1">php</a>
			<a href="/offensive/docs/subscribe.xml%3Fthreadid%3D211604%26subscribe%3D1">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#resetsubscription">resetsubscription</a> - 

Reset your subscription to a thread. New posts made to the thread after this call will cause the subscription to become active again.
</p>
			<p><a href="#unreadcomments">unreadcomments</a> - 

Get a list of unchecked activity on subscribed threads.
</p>
	
<hr/>
<a name="resetsubscription">
<h3>resetsubscription</h3>
<p>Reset your subscription to a thread. New posts made to the thread after this call will cause the subscription to become active again.</p>

<h4>Arguments:</h4>
<ul>
	    <li><b>threadid</b> (integer) - required.
						Reset the subscription to this thread.</li>
	</ul>


<h4>Returns:</h4>
<p>true if reset, false if no subscription or upload does not exist.</p>

<h4>Examples:</h4>
<p><code>resetsubscription.xxx?threadid=309779</code>: 
			<a href="/offensive/docs/resetsubscription.json%3Fthreadid%3D309779">json</a>
			<a href="/offensive/docs/resetsubscription.plist%3Fthreadid%3D309779">plist</a>
			<a href="/offensive/docs/resetsubscription.php%3Fthreadid%3D309779">php</a>
			<a href="/offensive/docs/resetsubscription.xml%3Fthreadid%3D309779">xml</a>
	</p>

<h4>See Also:</h4>

			<p><a href="#subscribe">subscribe</a> - 

(Un)Subscribe to new posts in a thread.
</p>
			<p><a href="#unreadcomments">unreadcomments</a> - 

Get a list of unchecked activity on subscribed threads.
</p>
	


<hr />
<a name="Errata">
<h2>Errata</h2>
<p>If the API lacks notable functionality, or operates in an unexpected manner, please report this behaviour (expected and actual, if applicable) to the <a href="mailto:tmbotech@googlegroups.com">tmbotech</a> mailing list, open a <a href="https://github.com/numist/this-might-be-offensive/issues">new issue</a>, or send numist an <a href="mailto:tmbo@numist.net">email</a>.</p>

<hr/>
<h2>Changelog</h2>
<ul>
	<li>August 11, 2008 - Initial draft.</li>
	<li>August 14, 2008 - postuploads should take nsfw and tmbo as arguments.</li>
	<li>August 15, 2008 - searchuploads and searchcomments get more parameters ([limit, type], limit).</li>
	<li>October 18, 2011 - Documentation is now generated/updated by script. Primary input is the documentation in the API code itself. See <a href="https://github.com/numist/this-might-be-offensive">github</a> for more detailed change information.</li>
	
	<li>October 24, 2011 - This page was generated.</li>
</ul>
</body>
</html>
