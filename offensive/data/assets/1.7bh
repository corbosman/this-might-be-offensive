/*! original file: thismight.be/offensive/js/irsz.js */
/*! Â©/info: https://github.com/numist/jslib/blob/master/irsz.js */
(function(f){var j,d={init:function(l){j.data("irsz",f.extend({min_height:400,min_width:400,auto:true,padding:[10,10],cursor_zoom_in:"auto",cursor_zoom_out:"auto",noresize_class:"irsz_noresize"},l||{}));b();j.load(function(){b()});f(window).bind("resize.irsz",function(){b()});j.each(function(){f(this).bind("click.irsz",function(o){var n=f(o.target);var m=n.width();var p=o.offsetY/n.height();var q=o.offsetX/n.width();i(n.get(0));if(m!=n.width()){o.preventDefault();if(m<n.width()){f(window).scrollTop((n.height()*p)+n.offset().top-(f(window).height()/2));f(window).scrollLeft((n.width()*q)+n.offset().left-(f(window).width()/2))}}return true})});return j},toggle:function(){if(j.data("irsz").auto==undefined){f.error("Must init plugin before calling members in jQuery.irsz");return j}j.each(function(){i(this)});return j},destroy:function(){if(j.data("irsz").auto==undefined){f.error("Must init plugin before calling members in jQuery.irsz");return j}f(window).unbind(".irsz");j.each(function(){f(this).unbind(".irsz")});j.each(function(){var l=this;c(l,function(n,m){g(l,n,m)});k(l)});j.data("irsz",{});return j}};f.fn.irsz=function(l){if(this.length==0){return this}j=this;if(d[l]){return d[l].apply(j,Array.prototype.slice.call(arguments,1))}else{if(typeof l==="object"||!l){return d.init.apply(j,arguments)}else{f.error("Method "+l+" does not exist on jQuery.irsz")}}};function c(o,n){var q="max-width",p="max-height",r="px",s,m;o=f(o);if(o.length!=1||o.attr("src")==undefined){return}if(o.filter("["+q+"]["+p+"]").length==1){var t,l;s=o.attr(q);t=parseInt(s.endsWith(r)?s.substr(0,s.lastIndexOf(r)):s);m=o.attr(p);l=parseInt(m.endsWith(r)?m.substr(0,m.lastIndexOf(r)):m);n(t,l)}else{f("<img/>").attr("src",o.attr("src")).load(function(){s=this.width,m=this.height;o.attr(q,s+r).attr(p,m+r);n(s,m)})}}function k(l){l.style.cursor="auto"}function e(l){f(l).css("cursor",function(){if(f.browser.mozilla){return"-moz-zoom-in"}else{if(f.browser.webkit){return"-webkit-zoom-in"}else{return j.data("irsz").cursor_zoom_in}}})}function h(l){f(l).css("cursor",function(){if(f.browser.mozilla){return"-moz-zoom-out"}else{if(f.browser.webkit){return"-webkit-zoom-out"}else{return j.data("irsz").cursor_zoom_out}}})}function i(l){c(l,function(m,n){if(f(l).width()<m||f(l).height<n){f(l).addClass(j.data("irsz").noresize_class);h(l);g(l,m,n)}else{f(l).removeClass(j.data("irsz").noresize_class);a(l)}})}function a(l){c(l,function(u,q){var r=u>q?u/q:q/u,t=f(window).width()-j.data("irsz").padding[0],y=f(window).height()-j.data("irsz").padding[1],m=0,o=0,w,n,v,x;if(q<j.data("irsz").min_height){return}if(u<j.data("irsz").min_width){return}function s(z){return Math.round(u*z/q)}function p(z){return Math.round(q*z/u)}w=t>j.data("irsz").min_width?t:j.data("irsz").min_width;n=p(w);x=y>j.data("irsz").min_height?y:j.data("irsz").min_height;v=s(x);w=w<u?w:u;n=n<q?n:q;v=v<u?v:u;x=x<q?x:q;if(/scroll/.test(f(l).attr("src"))||r>3){if(n<x){o=v;m=x}else{o=w;m=n}}else{if(n>x){o=v;m=x}else{o=w;m=n}}if(f(l).hasClass(j.data("irsz").noresize_class)){if(m<q&&o<u){h(l)}else{k(l)}return}if(m!=f(l).height()){if(m<q){e(l)}else{k(l)}g(l,o,m)}return})}function g(p,m,n){var p=f(p),l=p.width(),o=p.height();p.height(n+"px");p.width(m+"px");if(m!=l||n!=o){p.resize()}return}function b(){if(j.data("irsz").auto==true){j.each(function(){a(this)})}}})(jQuery);